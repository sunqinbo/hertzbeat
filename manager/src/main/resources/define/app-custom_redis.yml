category: custom
app: custom_redis
name:
  zh-CN: 东奥Redis
  en-US: 东奥Redis
params:
  - field: host
    name:
      zh-CN: 主机Host
      en-US: Host
    type: host
    required: true

  - field: port
    name:
      zh-CN: 端口
      en-US: Port
    type: number
    range: '[0,65535]'
    required: true
    defaultValue: 6379

  - field: timeout
    name:
      zh-CN: 超时时间
      en-US: Timeout
    type: number
    range: '[0,100000]'
    required: true
    defaultValue: 3000

  - field: username
    name:
      zh-CN: 用户名
      en-US: Username
    type: text
    limit: 50
    required: false

  - field: password
    name:
      zh-CN: 密码
      en-US: Password
    type: password
    required: false

# 采集指标组配置列表
metrics:
  # 通过hzb_history表的monitor_id增加一个md5字段,值为：md5(ip:port)，与外部程序写入 hzb_history_tmp表的 md5 关联；利用数据库的插入前事件机制，拷贝数据到hzb_history表
  - name: custom
    priority: 0
    fields:
      - field: net_output_bytes
        type: 0
        unit: MB
      - field: net_input_bytes
        type: 0
        unit: MB
      - field: connected_clients
        type: 0
        unit:
      - field: cpu_utility
        type: 0
        unit:
      - field: used_memory
        type: 0
        unit: MB
      - field: maxconn
        type: 0
        unit:
      - field: maxmemory
        type: 0
        unit: MB
      - field: memratio
        type: 0
        unit:
    calculates:
      - net_input_bytes=net_input_bytes/1024/1024
      - net_output_bytes=net_output_bytes/1024/1024
      - maxmemory=maxmemory/1024/1024
      - used_memory=used_memory/1024/1024
    protocol: jdbc
    jdbc:
      platform: mysql
      host: 10.0.6.223
      port: 3306
      username: root
      password: 123456
#      host: 10.0.75.104
#      port: 35007
#      username: sqb
#      password: 123
      database: hertzbeat
      timeout: 100000
      # SQL查询方式： oneRow, multiRow, columns,custom
      queryType: custom
      sql: select metric, dou from hzb_history where monitor_id=? and metrics='custom' ORDER BY time DESC LIMIT 0,?;
      url:

#  - name: cpu
#    priority: 1
#    fields:
#      - field: used_cpu_sys
#        type: 0
#    protocol: redis
#    redis:
#      host: ^_^host^_^
#      port: ^_^port^_^
#      username: ^_^username^_^
#      password: ^_^password^_^
#      timeout: ^_^timeout^_^